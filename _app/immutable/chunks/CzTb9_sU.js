import{t as b,a as f,c as xe}from"./DdyhVRrO.js";import{i as we}from"./BeYxgMet.js";import{Q as ye,V as X,R as Ie,T as r,U as i,f as K,s as l,a as t,m as g,g as e}from"./DDwyxSy3.js";import{s as Y}from"./DUDkuhxp.js";import{i as L}from"./Dx_FE2Yb.js";import{r as ke,b as N,u as Z,d as je}from"./2bZPbiiR.js";import{s as Ve,M as Ae}from"./j_NvyHS2.js";import{r as $,e as A}from"./CzTI-ryX.js";import{p}from"./0eAcf9mX.js";var Me=b('<div class="w-full h-screen flex justify-center items-center"><img src="./logo.png" alt="logo" class="animate-spin w-8 h-8"></div>'),Re=b('<div class="w-full h-full grid place-items-center"><h1>Saime pildi kätte, aitäh!</h1></div>'),Fe=b('<button class="w-24 border border-2 hover:border hover:border-2 hover:bg-[#26de81] hover:text-[#1e272e] cursor-pointer rounded-lg">Saada</button>'),Te=b('<button class="w-24 border border-2 border-red hover:bg-red-400 hover:text-[#1e272e] cursor-pointer rounded-lg hover:border-none">Tühista</button> <button class="w-24 border border-2 hover:bg-[#26de81] hover:text-[#1e272e] cursor-pointer rounded-lg hover:border-none">Lisa</button>',1),Se=b('<div class="w-full h-full grid md:grid-rows-2 md:grid-cols-2 grid-rows-4 grid-cols-1"><div class="w-full h-full p-6"><h1 class="text-xl mb-2">Pilt</h1> <div class="w-full h-fit py-12 flex justify-center items-center border border-white rounded-lg"><label for="file-upload" class="cursor-pointer"> </label> <input id="file-upload" type="file" accept="image/*" class="hidden"></div></div> <div class="w-full h-full p-6"><h1 class="text-xl mb-2">Asukoht</h1> <!></div> <div class="w-full h-full p-6"><h1 class="text-xl mb-2">Kirjeldus</h1> <textarea type="textarea" class="w-full h-28 flex justify-center items-center border border-white rounded-lg"></textarea></div> <div class="w-full h-full p-6"><h1 class="text-xl mb-2">Viide</h1> <textarea class="w-full h-28 flex justify-center items-center border border-white rounded-lg"></textarea></div> <div class="w-full h-full p-6"><h1 class="text-xl mb-2">Aasta</h1> <h1 class="text-lg"> </h1> <input type="range" min="1890" max="2025" class="w-full svelte-64zva" id="year-select"></div></div> <div class="w-full h-fit p-6 flex gap-6 justify-end"><!></div>',1),ze=b("<div><!></div>");function Be(ee,v){ye(v,!1);let P=p(v,"addImage",8,!1),w=g(null),M=p(v,"showForm",12,!1),y=p(v,"rounds",28,()=>[]),te=p(v,"gameId",8),o=null,c=null,n=g(null),d=g(null),u=g(null),s=g(1950),Q={},U={},_=p(v,"uploadingImage",12,!1),q=p(v,"imageAdded",12,!1);function ae(){M(!1)}async function le(){o&&e(n)&&e(d)&&e(u)&&e(s)?(_(!0),c=await Z(o,te()),Q={id:y().length+1,image_url:c,location:e(n),year:e(s),description:e(d),attribution:e(u)},y([...y(),Q]),o=null,c=null,t(n,null),t(d,null),t(u,null),t(w,null),t(s,null),M(!1),_(!1),t(I,"Vali pilt")):alert("Mõned väljad on täitmata!")}async function re(){o&&e(n)&&e(d)&&e(u)&&e(s)?(_(!0),c=await Z(o,"new_images"),U={id:y().length+1,image_url:c,location:e(n),year:e(s),description:e(d),attribution:e(u)},await je(U),q(!0),o=null,c=null,t(n,null),t(d,null),t(u,null),t(w,null),t(s,null),M(!1),_(!1),t(I,"Vali pilt")):alert("Mõned väljad on täitmata!")}let I=g("Vali pilt");function ie(){o=event.target.files[0],t(I,o.name)}we();var k=ze(),se=r(k);{var oe=m=>{var j=Me();f(m,j)},ne=m=>{var j=xe(),de=K(j);{var ue=h=>{var V=Re();f(h,V)},ve=h=>{var V=Se(),R=K(V),F=r(R),B=l(r(F),2),T=r(B),fe=r(T,!0);i(T);var ce=l(T,2);i(B),i(F);var S=l(F,2),me=l(r(S),2);Ae(me,{input:!0,get marker(){return e(w)},set marker(a){t(w,a)},get location(){return e(n)},set location(a){t(n,a)},$$legacy:!0}),i(S);var z=l(S,2),E=l(r(z),2);$(E),i(z);var C=l(z,2),G=l(r(C),2);$(G),i(C);var H=l(C,2),D=l(r(H),2),he=r(D,!0);i(D);var J=l(D,2);ke(J),i(H),i(R);var O=l(R,2),ge=r(O);{var pe=a=>{var x=Fe();A("click",x,re),f(a,x)},be=a=>{var x=Te(),W=K(x),_e=l(W,2);A("click",W,ae),A("click",_e,le),f(a,x)};L(ge,a=>{P()?a(pe):a(be,!1)})}i(O),X(()=>{Y(fe,e(I)),Y(he,e(s))}),A("change",ce,ie),N(E,()=>e(d),a=>t(d,a)),N(G,()=>e(u),a=>t(u,a)),N(J,()=>e(s),a=>t(s,a)),f(h,V)};L(de,h=>{q()?h(ue):h(ve,!1)},!0)}f(m,j)};L(se,m=>{_()?m(oe):m(ne,!1)})}i(k),X(()=>Ve(k,1,`w-full h-fit ${(P()?"":"absolute")??""} top-0 left-0 bg-[#1e272e]`)),f(ee,k),Ie()}export{Be as I};
